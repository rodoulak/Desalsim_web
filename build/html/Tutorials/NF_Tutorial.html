<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutotrial: Nanofiltration (NF) unit &mdash; DesalSim: Desalination and Brine Treatment simulation model 1.0.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=71272d9f"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutotrial: Multi-plug flow reactor (MF-PFR) unit" href="MF-PFR_Tutorial.html" />
    <link rel="prev" title="Tutotrial: Multi-effect distillation (MED) unit" href="MED_Tutorial.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            DesalSim: Desalination and Brine Treatment simulation model
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Desalsim_Tutorial.html">Desalsim Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Economic_Tutorial.html">Tutorial for Economic model</a></li>
<li class="toctree-l1"><a class="reference internal" href="Example_1_Tutorial.html">Example 1: Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="EDBM_Tutorial.html">Tutorial: Electrodialysis with Bipolar membranes (EDBM) unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="MED_Tutorial.html">Tutotrial: Multi-effect distillation (MED) unit</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutotrial: Nanofiltration (NF) unit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">1. Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#define-feed-characteristics">1.2. Define feed characteristics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-membrane-characteristics">1.3. Set Membrane Characteristics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#use-nfmass-class">2. Use NFMass class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">2.1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-nfmass-objects">2.2. Create NFMass objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assigned-the-results-to-output-parameters">2.3. Assigned the results to output parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#print-results">2.4. Print results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#use-osmoticpressure-class">3. Use OsmoticPressure class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#oveview">3.1. Oveview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-osmoticpressure-objectives-and-calculate-osmotic-pressure">3.2. Create OsmoticPressure objectives and calculate Osmotic Pressure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#use-nfenergy-class">4. Use NfEnergy class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">4.1. Oveview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-nf-energy-objectives-and-calculate-energy-consumption">4.2. Create nf_energy objectives and calculate Energy Consumption</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">4.3. Assigned the results to output parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">4.4. Print results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="MF-PFR_Tutorial.html">Tutotrial: Multi-plug flow reactor (MF-PFR) unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="TCr_Tutorial.html">Tutotrial: Thermal crystallizer (TCr) unit</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File description:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../File%20descr/Description.html">Files description</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Content:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Contributors.html">Contributors and Guidelines</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DesalSim: Desalination and Brine Treatment simulation model</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutotrial: Nanofiltration (NF) unit</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Tutorials/NF_Tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutotrial-nanofiltration-nf-unit">
<h1>Tutotrial: Nanofiltration (NF) unit<a class="headerlink" href="#tutotrial-nanofiltration-nf-unit" title="Link to this heading"></a></h1>
<div style="text-align: justify;"><p>Nanofiltration (NF) is a membrane liquid-separation technology sharing many characteristics with reverse osmosis (RO). Unlike RO, which has high rejection of virtually all dissolved solutes,
NF provides high rejection of multivalent ions, such as calcium, and low rejection of monovalent ions, such as chloride [&#64;dupontwebsite].</p>
<figure class="align-default">
<a class="reference internal image-reference" href="https://github.com/rodoulak/Desalination-and-Brine-Treatment-Simulation-/assets/150446818/1d41d6eb-90a7-4b68-ab1b-0ae31f83eb78"><img alt="Image" src="https://github.com/rodoulak/Desalination-and-Brine-Treatment-Simulation-/assets/150446818/1d41d6eb-90a7-4b68-ab1b-0ae31f83eb78" style="width: 600px;" /></a>
</figure>
<div style="text-align: justify;"><p>In desalsim package, the Nanofiltration unit is used to model the operation of a nanofiltration (or a membrane-based) technology. Upon simulation, it will generate the influent/effluent mass flows and their concentrations, the applied pressure, and the energy requirements.
The nanofiltration function consists of three classes: <a class="reference internal" href="#use-nfmass-class"><span class="std std-ref">NFMass</span></a>,  <a class="reference internal" href="#use-osmoticpressure-class"><span class="std std-ref">OsmoticPressure</span></a>, and  <a class="reference internal" href="#use-nfenergy-class"><span class="std std-ref">NfEnergy</span></a>.
In this tutorial, we will focus on how to use the three classes. <strong>Table 1</strong> gives an overview of the main inputs and outputs for each process unit of Nanofiltration.</p>
<table class="docutils align-default" id="id11">
<caption><span class="caption-text">Table 1. Process Inputs and Outputs of Nanofiltration</span><a class="headerlink" href="#id11" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 35.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Process</p></th>
<th class="head"><p>Input</p></th>
<th class="head"><p>Output</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Nanofiltration</p></td>
<td><p>Feed flow rate [m³/h]</p></td>
<td><p>Permeate flow rate and composition [g/L]</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Ion concentration [g/L]</p></td>
<td><p>Concentrate flow rate and composition [g/L]</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Water recovery [%]</p></td>
<td><p>Electrical requirements [kWhel]</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Ion rejection [-]</p></td>
<td><p>Osmotic pressure [bar]</p></td>
</tr>
</tbody>
</table>
<p>The mathematical description of Nanofiltration technology is given in [Mathematical description](<a class="reference external" href="https://github.com/rodoulak/Desalination-and-Brine-Treatment-Simulation-/tree/main/paper/Mathematical_description.pdf">https://github.com/rodoulak/Desalination-and-Brine-Treatment-Simulation-/tree/main/paper/Mathematical_description.pdf</a>), see Section A.1.</p>
<section id="getting-started">
<h2>1. Getting started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h2>
<blockquote>
<div><p>1.1. Import classes</p>
</div></blockquote>
<hr class="docutils" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">desalsim</span>
</pre></div>
</div>
<p>Then import the three classes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">desalsim.nanofiltration_unit_f</span> <span class="kn">import</span> <span class="n">OsmoticPressure</span>
<span class="kn">from</span> <span class="nn">desalsim.nanofiltration_unit_f</span> <span class="kn">import</span> <span class="n">NFMass</span>
<span class="kn">from</span> <span class="nn">desalsim.nanofiltration_unit_f</span> <span class="kn">import</span> <span class="n">NfEnergy</span>
</pre></div>
</div>
<p>Additionally, function for calculating density (<code class="docutils literal notranslate"><span class="pre">density_calc.py</span></code>) or constants (<code class="docutils literal notranslate"><span class="pre">comparison.py</span></code>) where user can add constant values like MW, prices etc, need to be imported.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">desalsim.density_calc</span> <span class="kn">import</span> <span class="n">density_calc</span>
<span class="kn">import</span> <span class="nn">desalsim.constants</span>
</pre></div>
</div>
<section id="define-feed-characteristics">
<h3>1.2. Define feed characteristics<a class="headerlink" href="#define-feed-characteristics" title="Link to this heading"></a></h3>
<p>You can initialize the feed solution by setting the flow rate, specifying the focus components and their concentration.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># Feed concentration</span>
<span class="n">components</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Na&#39;</span><span class="p">,</span> <span class="s1">&#39;Cl&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="s1">&#39;Mg&#39;</span><span class="p">,</span> <span class="s1">&#39;Ca&#39;</span><span class="p">,</span> <span class="s1">&#39;SO4&#39;</span><span class="p">]</span>
<span class="n">Ci_in</span> <span class="o">=</span> <span class="p">[</span><span class="mf">12.33</span><span class="p">,</span> <span class="mf">21.67</span><span class="p">,</span> <span class="mf">0.45</span><span class="p">,</span> <span class="mf">1.39</span><span class="p">,</span> <span class="mf">0.45</span><span class="p">,</span> <span class="mf">3.28</span><span class="p">]</span>
<span class="n">z_values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]</span>

    <span class="c1"># Feed flowrate</span>
<span class="n">Qsw</span> <span class="o">=</span> <span class="mi">3000</span> <span class="o">/</span> <span class="mi">24</span> <span class="o">*</span> <span class="n">d_in</span> <span class="c1">#m3/d</span>
</pre></div>
</div>
<p>Note that if you want to add more components, you need to update the components list and include the concentration of the new component in the <em>Ci_in</em></p>
<p>You can calculate the density of the feed solution:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mg_in</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">Ci_in</span><span class="p">)</span>
<span class="n">T</span><span class="o">=</span><span class="mi">20</span><span class="o">+</span><span class="mi">273</span> <span class="c1">#Operating temperature (units: K)</span>

    <span class="c1"># Feed flow density</span>
<span class="n">d_in</span> <span class="o">=</span> <span class="n">density_calc</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="mi">273</span><span class="p">,</span> <span class="n">mg_in</span><span class="p">)</span>  <span class="c1"># kg/m3</span>
</pre></div>
</div>
</section>
<section id="set-membrane-characteristics">
<h3>1.3. Set Membrane Characteristics<a class="headerlink" href="#set-membrane-characteristics" title="Link to this heading"></a></h3>
<p>You can set membrane characteristics, ion rejection rates and Water recovery.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># Ions rejection rates based on membrane characteristics (units: -)</span>
<span class="n">rjr_values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.16</span><span class="p">,</span> <span class="mf">0.29</span><span class="p">,</span> <span class="mf">0.21</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">]</span>
    <span class="c1"># Water recovery based on membrane characteristics (units: -)</span>
<span class="n">Wrec</span> <span class="o">=</span> <span class="mf">0.7</span>
</pre></div>
</div>
<p>After setting all the required inputs, then you can create the functions’ objectives.</p>
</section>
</section>
<section id="use-nfmass-class">
<span id="id1"></span><h2>2. Use NFMass class<a class="headerlink" href="#use-nfmass-class" title="Link to this heading"></a></h2>
<p>NFMass is a class used to represent Mass Balance for Nanofiltration Unit. In particular, it calculates the permeate and concentrate flow rates, and their ion concentrations.
NFMass takes as input the names of components (<em>comp</em>), the ion concentration in the feed (<em>C_in</em>), the rejection rates of the ions (<em>rjr_values</em>), the % of water recovery (<em>Wrec</em>) and the feed flow rate (<em>Qf</em>).</p>
<section id="overview">
<h3>2.1. Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h3>
<p>The following attributes are available within the NFMass class:</p>
<ul class="simple">
<li><p><cite>comp</cite>: (str) Component name</p></li>
<li><p><cite>Cfeedi</cite>: (float) Ion concentration in the feed (g/L)</p></li>
<li><p><cite>rjr</cite>: (float) Rejection of the ion by the membrane</p></li>
<li><p><cite>Wrec</cite>: (float) Water recovery in the first pass</p></li>
<li><p><cite>Qf</cite>: (float) Feed flow rate (kg/h)</p></li>
<li><p><cite>Qperm</cite>: (float) Permeate flow rate (kg/h)</p></li>
<li><p><cite>Qconc</cite>: (float) Concentrate flow rate (kg/h)</p></li>
<li><p><cite>Cpermi</cite>: (float) Ion concentration in the permeate (g/L)</p></li>
<li><p><cite>Cconci</cite>: (float) Ion concentration in the concentrate (g/L)</p></li>
</ul>
<p>The NFMass class provides the following method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">calculate_perm</span><span class="p">()</span>
</pre></div>
</div>
<p>This method calculates the permeate and concentrate flow rates, as well as their corresponding ion concentrations based on the provided attributes. It is automatically called upon initialization of the class instance.</p>
</section>
<section id="create-nfmass-objects">
<h3>2.2. Create NFMass objects<a class="headerlink" href="#create-nfmass-objects" title="Link to this heading"></a></h3>
<p>NFMass takes as input the names of components (<em>comp</em>), the ion concentration in the feed (<em>C_in</em>), the rejection rates of the ions (<em>rjr_values</em>), the % of water recovery (<em>Wrec</em>) and the feed flow rate (<em>Qf</em>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># Function to create NFMass objects for different components</span>
<span class="k">def</span> <span class="nf">create_nfmass_objects</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">C_in</span><span class="p">,</span> <span class="n">rjr_values</span><span class="p">,</span> <span class="n">Wrec</span><span class="p">,</span> <span class="n">Qf</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">NFMass</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span> <span class="n">Ci</span><span class="p">,</span> <span class="n">rjr</span><span class="p">,</span> <span class="n">Wrec</span><span class="p">,</span> <span class="n">Qf</span><span class="p">)</span> <span class="k">for</span> <span class="n">comp</span><span class="p">,</span> <span class="n">Ci</span><span class="p">,</span> <span class="n">rjr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">C_in</span><span class="p">,</span> <span class="n">rjr_values</span><span class="p">)]</span>

    <span class="c1"># Create NFMass objects for different components</span>
<span class="n">nfmass_objects</span> <span class="o">=</span> <span class="n">create_nfmass_objects</span><span class="p">(</span><span class="n">components</span><span class="p">,</span> <span class="n">Ci_in</span><span class="p">,</span> <span class="n">rjr_values</span><span class="p">,</span> <span class="n">Wrec</span><span class="p">,</span> <span class="n">Qf_nf</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="assigned-the-results-to-output-parameters">
<h3>2.3. Assigned the results to output parameters<a class="headerlink" href="#assigned-the-results-to-output-parameters" title="Link to this heading"></a></h3>
<p>After the calculation of the permeate and concentrate flow rates, as well as their corresponding ion concentrations based on the provided attributes, you can assigned the results to output parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># Components concentrattion in concentrate stream</span>
<span class="n">Cconc</span> <span class="o">=</span> <span class="p">[</span><span class="n">nf_mass</span><span class="o">.</span><span class="n">Cconci</span> <span class="k">for</span> <span class="n">nf_mass</span> <span class="ow">in</span> <span class="n">nfmass_objects</span><span class="p">]</span>
    <span class="c1"># Components concentrattion in permeate stream</span>
<span class="n">Cperm</span> <span class="o">=</span> <span class="p">[</span><span class="n">nf_mass</span><span class="o">.</span><span class="n">Cpermi</span> <span class="k">for</span> <span class="n">nf_mass</span> <span class="ow">in</span> <span class="n">nfmass_objects</span><span class="p">]</span>
    <span class="c1"># Permeate stream mass flow rate</span>
<span class="n">Qperm</span> <span class="o">=</span> <span class="n">nfmass_objects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Qperm</span>  <span class="c1"># kg/hr</span>
    <span class="c1"># Concentrate stream mass flow rate</span>
<span class="n">Qconc</span> <span class="o">=</span> <span class="n">nfmass_objects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Qconc</span>  <span class="c1"># kg/hr</span>
</pre></div>
</div>
</section>
<section id="print-results">
<h3>2.4. Print results<a class="headerlink" href="#print-results" title="Link to this heading"></a></h3>
<p>You can print results from mass calculations</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Permeate stream flow rate is &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">Qperm</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;kg/hr&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Permeate stream total concentration is &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">Cperm</span><span class="p">),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;g/l&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Concentrate stream flow rate is &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">Qconc</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;kg/hr&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Concentrate stream total concentration is &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">Cconc</span><span class="p">),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;g/l&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Permeate stream flow rate is 89974.58kg/hr</p>
<p>Permeate stream total concentration is 26.21g/l</p>
<p>Concentrate stream flow rate is 38560.54kg/hr</p>
<p>Concentrate stream total concentration is 70.73g/l</p>
</section>
</section>
<section id="use-osmoticpressure-class">
<span id="id2"></span><h2>3. Use OsmoticPressure class<a class="headerlink" href="#use-osmoticpressure-class" title="Link to this heading"></a></h2>
<div style="text-align: justify;"><p>OsmoticPressure is a class used to represent the calculation of osmotic pressure for Nanofiltration Unit. For the calculation of the energy consumption, first the Osmotic pressure for the three streams (feed, concentrate, permeate) need to be calculated. For this calculation, you need to use the ion concentration of the stream (<em>Ci_in</em>, <em>Cperm</em>, <em>Cconc</em>) the ionelectric charge (<em>z_values</em>), and the stream temperature (<em>T</em>). The class <em>returns the Osmotic pressure</em> of the solution.</p>
<section id="oveview">
<h3>3.1. Oveview<a class="headerlink" href="#oveview" title="Link to this heading"></a></h3>
<p>The following attributes are available within the OsmoticPressure class:</p>
<ul class="simple">
<li><p><a href="#id3"><span class="problematic" id="id4">`</span></a>C1, C2 C3, C4, C5, C6 <a href="#id5"><span class="problematic" id="id6">`</span></a>: (float) Concentration of ions in the solution (mol/L).</p></li>
<li><p><cite>z1, z2,z3, z4, z5, z6</cite>: (int) Charge of ions in the solution.</p></li>
</ul>
<p>The OsmoticPressure class provides the following method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">osmotic_pressure_calculation</span><span class="p">()</span>
</pre></div>
</div>
<p>This method calculates the osmotic pressure of a solution.</p>
</section>
<section id="create-osmoticpressure-objectives-and-calculate-osmotic-pressure">
<h3>3.2. Create OsmoticPressure objectives and calculate Osmotic Pressure<a class="headerlink" href="#create-osmoticpressure-objectives-and-calculate-osmotic-pressure" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># Calculate Osmotic Pressure for the three streams</span>
<span class="n">P_osmo_f</span> <span class="o">=</span> <span class="n">OsmoticPressure</span><span class="p">(</span><span class="n">Ci_in</span><span class="p">,</span> <span class="n">z_values</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">osmotic_pressure_calculation</span><span class="p">()</span>
<span class="n">P_osmo_p</span> <span class="o">=</span> <span class="n">OsmoticPressure</span><span class="p">(</span><span class="n">Cperm</span><span class="p">,</span> <span class="n">z_values</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">osmotic_pressure_calculation</span><span class="p">()</span>
<span class="n">P_osmo_c</span> <span class="o">=</span> <span class="n">OsmoticPressure</span><span class="p">(</span><span class="n">Cconc</span><span class="p">,</span> <span class="n">z_values</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">osmotic_pressure_calculation</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="use-nfenergy-class">
<span id="id7"></span><h2>4. Use NfEnergy class<a class="headerlink" href="#use-nfenergy-class" title="Link to this heading"></a></h2>
<div style="text-align: justify;"><p>NfEnergy is a class used to represent the calculation of energy consumption and the specific energy consumption for Nanofiltration Unit. For this calculation, the Osmotic pressure for the three streams (feed, concentrate, permeate) is used. In addition, the NfEnergy takes as input the expected pressure drop in each stream (<em>dp, d_p_, d_in</em>) and the pump efficiency (<em>n</em>).
The class returns the Applied pressure, power for applied pressure, the total energy <em>consumption</em> and the <em>specific energy consumption per m:sup:`3` permeate</em> and <em>m:sup:`3` feed</em>.</p>
<section id="id8">
<h3>4.1. Oveview<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<p>The following attributes are available within the NfEnergy class:</p>
<ul class="simple">
<li><p><cite>P_osmo_c</cite>: (float) Osmotic pressure of concentrate stream (bar).</p></li>
<li><p><cite>P_osmo_f</cite>: (float) Osmotic pressure of feed stream (bar).</p></li>
<li><p><cite>P_osmo_p</cite>: (float) Osmotic pressure of permeate stream (bar).</p></li>
<li><p><cite>dp</cite>: (float) Pressure drop (bar).</p></li>
<li><p><cite>d_p</cite>: (float) Permeate stream density (kg/m³).</p></li>
<li><p><cite>Qperm</cite>: (float) Permeate flow rate (kg/h).</p></li>
<li><p><cite>Qf</cite>: (float) Concentrate flow rate (kg/h).</p></li>
<li><p><cite>d_in</cite>: (float) Feed stream density (kg/m³).</p></li>
<li><p><cite>n</cite>: (float) Pump efficiency (-).</p></li>
</ul>
<p>The  NfEnergy class provides the following method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">calculate_energy_consumption</span><span class="p">()</span>
</pre></div>
</div>
<p>This method calculates the Applied pressure, power for applied pressure, the total energy consumption, and the specific energy consumption per m<sup>3</sup> permeate and m<sup>3</sup> feed.</p>
</section>
<section id="create-nf-energy-objectives-and-calculate-energy-consumption">
<h3>4.2. Create nf_energy objectives and calculate Energy Consumption<a class="headerlink" href="#create-nf-energy-objectives-and-calculate-energy-consumption" title="Link to this heading"></a></h3>
<p>The following objective is created for energy consumption. Assumptions for pressure drop and pump efficiency need to be made.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nf_energy</span><span class="o">=</span><span class="n">NfEnergy</span><span class="p">(</span><span class="n">P_osmo_c</span><span class="p">,</span> <span class="n">P_osmo_f</span><span class="p">,</span> <span class="n">P_osmo_p</span><span class="p">,</span> <span class="n">dp</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">d_p</span><span class="p">,</span> <span class="n">Qperm</span><span class="p">,</span> <span class="n">Qf_nf</span><span class="p">,</span> <span class="n">d_in</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span> <span class="c1"># dp: pressure drop (units: bar) and n: pump efficiency (units: -)</span>
<span class="n">result</span><span class="o">=</span><span class="n">nf_energy</span><span class="o">.</span><span class="n">calculate_energy_consumption</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="id9">
<h3>4.3. Assigned the results to output parameters<a class="headerlink" href="#id9" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">E_el_nf</span> <span class="o">=</span> <span class="n">nf_energy</span><span class="o">.</span><span class="n">E_el_nf</span>
</pre></div>
</div>
</section>
<section id="id10">
<h3>4.4. Print results<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<p>You can print results from energy calculations. The specific energy consumption is also calculated so you can validate easier the results.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Applied pressure (Bar): 24.45</p>
<p>Power for pump (KW): 60.01</p>
<p>E_el_nf (KW): 75.02</p>
<p>Specific Energy Consumption (KWh/m3 of permeate): 0.85</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="MED_Tutorial.html" class="btn btn-neutral float-left" title="Tutotrial: Multi-effect distillation (MED) unit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="MF-PFR_Tutorial.html" class="btn btn-neutral float-right" title="Tutotrial: Multi-plug flow reactor (MF-PFR) unit" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Rodoula Ktori.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>